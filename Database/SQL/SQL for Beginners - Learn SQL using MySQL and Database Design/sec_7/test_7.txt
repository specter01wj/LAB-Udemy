use jw_coffeeStore;

select * from customers;
select * from products;
select * from orders;

#inner join

select products.name, orders.order_time from orders
inner join products on orders.product_id = products.id;

select products.name, orders.order_time from orders
inner join products on orders.product_id = products.id;

select p.name, o.order_time from orders o
join products p on o.product_id = p.id;

select p.id,p.name, p.price, o.order_time from orders o
join products p on o.product_id = p.id
where o.product_id = 5
order by o.order_time;

#left join
select * from orders;

update orders
set customer_id = null
where id = 1;

select o.id, c.phone_num, c.last_name, o.order_time from orders o
left join customers c on o.customer_id = c.id
order by o.order_time
limit 10;

select o.id, c.phone_num, c.last_name, o.order_time from customers c
left join orders o on c.id = o.customer_id
order by o.order_time
limit 10;

#right join

select o.id, c.phone_num, c.last_name, o.order_time from customers c
right join orders o on c.id = o.customer_id
order by o.order_time
limit 10;

select o.id, c.phone_num, c.last_name, o.order_time from orders o
right join customers c on o.customer_id = c.id
order by o.order_time
limit 10;

update orders
set customer_id = 1
where id = 1;

#Joining more than Two Tables

select p.name, p.price, c.first_name, c.last_name, o.order_time from products p
join orders o on p.id = o.product_id
join customers c on c.id = o.customer_id
where c.last_name = 'Martin'
order by o.order_time;

#exec 1

select o.id, c.phone_num from orders o
join customers c on o.customer_id = c.id
where o.product_id = 4;

SELECT p.name, o.order_time FROM products p
join orders o on p.id = o.product_id
where p.name = 'Mocha' 
and o.order_time between '2017-01-15' AND '2017-02-14';

SELECT p.name, p.price, o.order_time FROM products p
join orders o on p.id = o.product_id
join customers c on o.customer_id = c.id
where c.gender = 'f'
and o.order_time between '2017-01-01' AND '2017-01-31';





